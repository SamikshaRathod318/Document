<div class="department-container">
  <div class="header">
    <h1>{{ 'Departments' | translate }}</h1>
    <div class="search-container">
      <div class="search-box">
        <span class="search-icon">ğŸ”</span>
        <input type="text" placeholder="{{ 'Search departments...' | translate }}" [(ngModel)]="searchQuery" (input)="filterCategories()">
      </div>
      <button class="new-dept-btn" (click)="createNewCategory()">
        <span>+</span>
        {{ 'New Department' | translate }}
      </button>
    </div>
  </div>
  
  <div class="departments-grid">
    <div class="department-card" *ngFor="let category of filteredCategories">
      <div class="card-header">
        <h2 class="department-name">{{ category.name | translate }}</h2>
        <span class="document-count">{{ category.documentCount }} {{ 'documents' | translate }}</span>
      </div>
      
      <p class="department-description">{{ (category.description | translate) || ('No description provided' | translate) }}</p>
      
      <div class="card-footer">
        <span class="last-updated">{{ 'Updated' | translate }} {{ category.lastUpdated | date:'MMM d, y' }}</span>
        <div class="card-actions">
          <button class="action-btn edit-btn" (click)="editCategory(category, $event)" title="{{ 'Edit' | translate }}">
            ğŸ“
          </button>
          <button class="action-btn delete-btn" (click)="openDelete(category, $event)" title="{{ 'Delete' | translate }}">
            ğŸ—‘ï¸
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Create Department Modal -->
  <div class="modal-backdrop" *ngIf="isCreateOpen" (click)="closeCreate()"></div>
  <div class="modal" *ngIf="isCreateOpen">
    <div class="modal-header">
      <h2>{{ 'New Department' | translate }}</h2>
      <button type="button" class="close-btn" (click)="closeCreate()">Ã—</button>
    </div>
    <div class="modal-body">
      <label>
        <span>Name</span>
        <input type="text" [(ngModel)]="createForm.name" placeholder="{{ 'Department name' | translate }}" />
      </label>
      <label>
        <span>{{ 'Description' | translate }}</span>
        <textarea [(ngModel)]="createForm.description" rows="3" placeholder="{{ 'Short description' | translate }}"></textarea>
      </label>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn" (click)="closeCreate()">{{ 'Cancel' | translate }}</button>
      <button type="button" class="btn primary" (click)="saveCreate()">{{ 'Save' | translate }}</button>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div class="modal-backdrop" *ngIf="isDeleteOpen" (click)="closeDelete()"></div>
  <div class="modal" *ngIf="isDeleteOpen">
    <div class="modal-header">
      <h2>{{ 'Delete Department' | translate }}</h2>
      <button type="button" class="close-btn" (click)="closeDelete()">Ã—</button>
    </div>
    <div class="modal-body">
      <p>{{ 'Are you sure you want to delete' | translate }} <strong>{{ deleteTarget?.name }}</strong>? {{ 'This action cannot be undone.' | translate }}</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn" (click)="closeDelete()">{{ 'Cancel' | translate }}</button>
      <button type="button" class="btn danger" (click)="confirmDelete()">{{ 'Delete' | translate }}</button>
    </div>
  </div>

  <!-- Edit Department Modal -->
  <div class="modal-backdrop" *ngIf="isEditOpen" (click)="closeEdit()"></div>
  <div class="modal" *ngIf="isEditOpen">
    <div class="modal-header">
      <h2>{{ 'Edit Department' | translate }}</h2>
      <button type="button" class="close-btn" (click)="closeEdit()">Ã—</button>
    </div>
    <div class="modal-body">
      <label>
        <span>Name</span>
        <input type="text" [(ngModel)]="editForm.name" placeholder="{{ 'Department name' | translate }}" />
      </label>
      <label>
        <span>{{ 'Description' | translate }}</span>
        <textarea [(ngModel)]="editForm.description" rows="3" placeholder="{{ 'Short description' | translate }}"></textarea>
      </label>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn" (click)="closeEdit()">{{ 'Cancel' | translate }}</button>
      <button type="button" class="btn primary" (click)="saveEdit()">{{ 'Save' | translate }}</button>
    </div>
  </div>
</div>